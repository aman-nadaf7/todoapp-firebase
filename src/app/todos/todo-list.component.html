<div class="todo-header-row">
  <h2 class="section-title">Todo List</h2>
  <a routerLink="/todos/add" class="link-button">+ Add Todo</a>
</div>

<!-- search bar -->
<div class="search-row">
  <div class="search-wrapper">
    <span class="search-icon">üîç</span>
    <input
      type="text"
      class="search-input"
      placeholder="Search tasks by title, description or status"
      [value]="searchText()"
      (input)="onSearchChange($event.target.value)"
    />
  </div>
</div>

<div *ngIf="filteredGroupedTodos().length; else emptyState">
  <section
    class="todo-section"
    *ngFor="let group of filteredGroupedTodos()"
  >
    <h3 class="section-title">{{ group.date }}</h3>

    <ul class="todo-list">
      <li
  class="todo-item"
  *ngFor="let todo of group.todos; trackBy: trackById"
  (click)="todo.status !== 'completed' && router.navigate(['/todos/edit', todo.id])"
>

        <div class="todo-main">
          <div class="todo-title-row">
            <input
              type="checkbox"
              class="todo-checkbox"
              [checked]="todo.status === 'completed'"
              [disabled]="todo.status === 'completed'"
              (click)="$event.stopPropagation()"
              (change)="toggleCompleted(todo, $event.target.checked)"
            />
            <span class="todo-title">{{ todo.title }}</span>
            <span
              class="todo-status-pill"
              [ngClass]="{
                'todo-status-pending': todo.status === 'pending',
                'todo-status-in-progress': todo.status === 'in-progress',
                'todo-status-completed': todo.status === 'completed'
              }"
            >
              {{ todo.status }}
            </span>
          </div>
          <div class="todo-desc">{{ todo.description }}</div>
        </div>
        <button
          class="icon-btn icon-btn-danger"
          type="button"
          (click)="onDeleteTodo(todo, $event)"
          aria-label="Delete todo"
        >
          <span class="icon-trash"></span>
        </button>
      </li>
    </ul>
  </section>
</div>

<ng-template #emptyState>
  <p class="todo-empty">
    No todos yet. Click <strong>Add Todo</strong> to create your first task.
  </p>
</ng-template>
